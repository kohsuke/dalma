<document>
  <properties>
    <title>Endpoint URL</title>
  </properties>
  <body>
    <section name="E-mail Endpoint URL">
    <p>
      The e-mail endpoint defines the <a href="../endpoint.html#Endpoint_URL">endpoint URL</a> as follows:
    </p>
<source><![CDATA[
smtp://<smtp protocol part>!pop3://<pop3 protocol part>
smtp://<smtp protocol part>!imap4://<imap4 protocol part>
smtp://<smtp protocol part>!maildir://<maildir protocol part>
]]></source>
     <p>
       The complete example of some e-mail endpoint URLs follow:
     </p>
<source><![CDATA[
# mail address = daemon@kohsuke.org
# checks incoming e-mails from the POP3 server at mail.kohsuke.org
# with username 'userid' and password 'password'
smtp://daemon@kohsuke.org!pop3://userid:password@mail.kohsuke.org/

# mail address = dalma daemon <daemon@kohsuke.org>
# checks incoming e-mails from maildir at /var/spool/mail/kohsuke
smtp://daemon@kohsuke.org?personal=dalma%20daemon!maildir:///var/spool/mail/kohsuke

# connect to IMAP4 server at mail.kohsuke.org with SSL
# see http://www.javaworld.com/javatips/jw-javatip115.html
# note that it's really one line
smtp://daemon@kohsuke.org?mail.imap.socketFactory.class=javax.net.ssl.SSLSocketFactory
  &mail.imap.port=993
  !imap4://userid:password@mail.kohsuke.org/
]]></source>
      <subsection name="SMTP protocol part">
        <p>
          SMTP portion of the endpoint URL has the following format:
        </p>
<source><![CDATA[smtp://<mail address>&<query parameters>]]></source>
        <p>
          The mail address specifies the e-mail address (of the form <i>username</i>@<i>hostname</i>) that this endpoint is connected to. Every outgoing message from this endpoint will use this address as <tt>From:</tt> and <tt>Reply-To:</tt> header, and e-mail to this address is assumed to be delivered to POP3/IMAP4/maildir specified in the latter portion of the URL.
        </p><p>
          Query parameter "personal" can be specified to set the human readable name of the e-mail address. For example, <tt>daemon@kohsuke.org?personal=dalma%20daemon</tt> will produce the e-mail address <tt>dalma daemon &lt;daemon@kohsuke.org></tt>.
        </p><p>
          The other query parameters are simply passed to JavaMail. See <a href="configure.html#Configuring_JavaMail">this document</a> for more about what parameters are available. Note that since this endpoint URL implementation cannot know about all the properties recognized by JavaMail, it does not perform error checks on property names.
       </p>
      </subsection>
      <subsection name="IMAP4 protocol part">
        <p>
          IMAP4 portion of the endpoint URL has exactly the same format as POP3, except
          the scheme portion.
        </p>
<source><![CDATA[imap4://<userid>:<password>@<server name>&<query parameters>]]></source>
        <p>
          See the POP3 protocol part section for the description of the URL.
        </p>
      </subsection>
      <subsection name="maildir protocol part">
        <p>
          Maildir portion of the endpoint URL has the following format:
        </p>
<source><![CDATA[maildir://<path-to-maildir>&<query parameters>]]></source>
        <p>
          <i>path-to-maildir</i> is the directory name of the maildir to check. It can be absolute or relative to the current directory of the application. Note that to specify an absolute path name on Unix, the URL will look like <tt>maildir:///var/spool/kohsuke/mail</tt> with three hyphens. On Windows it will look like <tt>maildir://c:/var/spool/kohsuke/mail</tt> with two hyphens.
        </p><p>
          Because Java lacks file system change notification, this connectivity is implemented by polling. The interval of the polling can be changed by using the optional <tt>interval</tt> query parameter. See the POP3 protocol part section for details.
        </p>
      </subsection>
    </section>
  </body>
</document>